<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Lumue.github.io by lumue</title>

    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport"
          content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <link rel="alternate" type="application/rss+xml" title="gosub" href="http://lumue.github.io/feed.xml">
</head>
<body>
<div class="wrapper">
    <header>
    <h1 class="header">
        <a href="/index.html">gosub</a>
    </h1>

    <p class="header">
        a weblog
    </p>

    <p> <ul class="tag-cloud">
    
    <li class="tag-cloud-item" style="font-size: 86%">
        <a href="#java">
            java
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 78%">
        <a href="#spring-boot">
            spring-boot
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#eai">
            eai
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#spring-integration">
            spring-integration
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 78%">
        <a href="#spring">
            spring
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 86%">
        <a href="#linux">
            linux
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 78%">
        <a href="#network">
            network
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 78%">
        <a href="#monitoring">
            monitoring
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#dd-wrt">
            dd-wrt
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#programming">
            programming
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#testing">
            testing
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#html5">
            html5
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#html">
            html
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#python">
            python
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#kodi">
            kodi
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 78%">
        <a href="#docker">
            docker
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#getdown">
            getdown
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 78%">
        <a href="#devops">
            devops
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#svn">
            svn
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 78%">
        <a href="#slack">
            slack
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#firebird">
            firebird
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#glassfish">
            glassfish
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#jee">
            jee
        </a>
    </li>
    
    <li class="tag-cloud-item" style="font-size: 74%">
        <a href="#gaming">
            gaming
        </a>
    </li>
    
</ul></p>

    <ul class="button-list">
        <li class="button-list-item"><a class="buttons github" href="https://github.com/lumue">github/lumue</a></li>
        <li class="button-list-item">
            <a href="https://twitter.com/lutzmueller" class="buttons" data-show-count="false" data-show-screen-name="false">@lutzmueller</a>
            <script>
                !function (d, s, id) {
                    var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
                    if (!d.getElementById(id)) {
                        js = d.createElement(s);
                        js.id = id;
                        js.src = p + '://platform.twitter.com/widgets.js';
                        fjs.parentNode.insertBefore(js, fjs);
                    }
                }(document, 'script', 'twitter-wjs');
            </script>
        </li>
    </ul>

</header>
    <section>
        <h1 id="using-a-logitech-g13-gaming-keypad-on-debian-sid">Using a Logitech G13 gaming keypad on debian sid</h1>

<p>This is a short HOWTO on setting up g13d as a systemd controlled service on debian linux.  <br />
If you just want to use your g13 and dont care about how it is done, fair enough: I compiled what is described here into a bunch of shell scripts ready to checkout and execute for you from <a href="https://github.com/lumue/g13d-service">here</a>.</p>

<h2 id="checkout-and-build">checkout and build</h2>

<p>go to <a href="https://github.com/ecraven/g13">https://github.com/ecraven/g13</a>, checkout their repo and follow the installation instructions.</p>

<pre><code>git clone https://github.com/ecraven/g13.git
cd g13
make
</code></pre>

<h2 id="installation">installation</h2>

<p>copy the <code>g13d</code> binary to <code>/usr/bin/g13d</code> or make it otherwise accesible on your path.</p>

<pre><code>sudo cp g13d /usr/bin/g13d &amp;&amp; sudo chmod a+x /usr/bin/g13d
</code></pre>

<p>create a start script g13d-run to init the bindings and start g13d and put it in <code>/usr/bin</code></p>

<pre><code>sudo touch /usr/bin/g13d-run &amp;&amp; sudo chmod a+x/usr/bing13d-run
</code></pre>

<p>open the file and paste the following script:</p>

<pre><code>#!/usr/bin/env bash
G13D_WORK="/tmp/g13d"

if [ -d G13D_WORK ]
then
    echo "using existing $G13D_WORK as working directory ..."
else
    echo "creating $G13D_WORK as working directory ..."
    mkdir "$G13D_WORK"
fi

cd "$G13D_WORK"
cat /etc/g13d.d/default.bind &gt;&gt; /tmp/g13-0
/usr/bin/g13d
</code></pre>

<h3 id="setup-systemd-service">setup systemd service</h3>

<p>create a start script for the service named <code>g13d-service</code> and save it in <code>/etc/init.d</code></p>

<pre><code>sudo touch /etc/init.d/g13d-service &amp;&amp; sudo chmod a+x /etc/init.d/g13d-service
</code></pre>

<p>open the file and paste the following script:</p>

<pre><code>#!/bin/bash
G13D_HOME="/usr/lib/g13d"
PID=""

function get_pid {
   PID=`pidof g13d`
}

function stop {
   get_pid
   if [ -z $PID ]; then
      echo "server is not running."
      exit 1
   else
      echo -n "Stopping server.."
      kill -9 $PID
      sleep 1
      echo ".. Done."
   fi
}


function start {
   get_pid
   if [ -z $PID ]; then
      echo  "Starting server.."
        (/usr/bin/g13d-run &amp;&gt; /dev/null  &amp;) &amp;
      get_pid
      echo "Done. PID=$PID"
   else
      echo "server is already running, PID=$PID"
   fi
}

function restart {
   echo  "Restarting server.."
   get_pid
   if [ -z $PID ]; then
      start
   else
      stop
      sleep 5
      start
   fi
}


function status {
   get_pid
   if [ -z  $PID ]; then
      echo "Server is not running."
      exit 1
   else
      echo "Server is running, PID=$PID"
   fi
}

case "$1" in
   start)
      start
   ;;
   stop)
      stop
   ;;
   restart)
      restart
   ;;
   status)
      status
   ;;
   *)
      echo "Usage: $0 {start|stop|restart|status}"
esac
</code></pre>

<p>create a systemd .service script for the service named <code>g13d-service.service</code> and save it in <code>/lib/systemd/g13d-service.service</code></p>

<pre><code>sudo touch /lib/systemd/g13d-service.service &amp;&amp; sudo chmod a+x /lib/systemd/g13d-service.service
</code></pre>

<p>open the file and paste the following script:</p>

<pre><code>[Unit]
Description=Start g13d-service

[Service]
WorkingDirectory=/tmp/g13d
Type=forking
ExecStart=/bin/bash /etc/init.d/g13d-service start
KillMode=process

[Install]
WantedBy=multi-user.target
</code></pre>

<h3 id="setup-default-bindings">setup default bindings</h3>

<p>create a directory <code>/etc/g13d.d</code> and put your bindings in a file named <code>/etc/g13d.d/default.bind</code></p>

<p>my bindings file looks like this:</p>

<pre><code>bind G1 KEY_F1
bind G2 KEY_F2
bind G3 KEY_F3
bind G4 KEY_F4
bind G5 KEY_F5
bind G6 KEY_F6
bind G7 KEY_F7
bind G8 KEY_1 
bind G9 KEY_2
bind G10 KEY_3
bind G11 KEY_4
bind G12 KEY_5
bind G13 KEY_6
bind G14 KEY_7
bind G15 KEY_8
bind G16 KEY_9
bind G17 KEY_0
bind G18 KEY_F8
bind G19 KEY_F9
bind G20 KEY_F10
bind G21 KEY_F11
bind G22 KEY_TAB
bind DOWN KEY_LEFTALT
</code></pre>

<p>Now execute</p>

<pre><code>sudo systemctl daemon-reload
sudo systemctl enable g13d-service.service
</code></pre>

<p>to install the service, and we are done!</p>

<h2 id="running">Running</h2>

<p>Now you can control g13d like any other service on your box. just issue</p>

<pre><code>sudo systemctl status g13d-service
</code></pre>

<p>to start the service.</p>


        <div class="post-tags">
  Tags: 
  
  
  <a href="/tags/#linux">linux</a>,
  
  <a href="/tags/#gaming">gaming</a>
  
</div>
        <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'lumue'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </section>
    <footer>
        <p>
            <small>Hosted on <a href="http://pages.github.com">GitHub Pages</a>
            </small>
        </p>
        <p>
            <small><a href="http://lumue.github.io/feed.xml">RSS</a>
            </small>
        </p>
    </footer>
</div>
<!--[if !IE]>
<script>fixScale(document);</script><![endif]-->

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-69535101-1', 'auto');
    ga('send', 'pageview');

</script>

</body>
</html>
